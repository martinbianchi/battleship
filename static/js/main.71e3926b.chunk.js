(this.webpackJsonpbattleship=this.webpackJsonpbattleship||[]).push([[0],[,,,,,,,,,,,function(t,e,n){t.exports={card:"CardGame_card__3hcCS",title:"CardGame_title__2_1TD",statisticContainer:"CardGame_statisticContainer__35rvz",statisticSection:"CardGame_statisticSection__2g7m9",statistic:"CardGame_statistic__24CA5",success:"CardGame_success__3dmJA",failure:"CardGame_failure__2gO8I"}},,,,function(t,e,n){t.exports={position:"Position_position__2XjEB",initial:"Position_initial__1Akpx",missed:"Position_missed__368Yt",shoot:"Position_shoot__3UnDM",sunk:"Position_sunk__X7Ufl"}},,,,,function(t,e,n){t.exports={input:"RadioButton_input__1jXbv",inputLabel:"RadioButton_inputLabel__37kxS",inputContainer:"RadioButton_inputContainer__3_Qdp",selected:"RadioButton_selected__2Bt5M"}},,function(t,e,n){t.exports={game:"Game_game__HeYIC",titleClass:"Game_titleClass__3qlDx",finished:"Game_finished__1nlYg"}},function(t,e,n){t.exports={board:"Board_board__kNpEF",coord:"Board_coord__3vbX8"}},function(t,e,n){t.exports={endGame:"EndGame_endGame__6K0ow",message:"EndGame_message__2WVYF",actions:"EndGame_actions__2cgxU"}},,,,,,,function(t,e,n){t.exports={bgVideo:"BgVideo_bgVideo__3RlYx",bgVideoContent:"BgVideo_bgVideoContent__2blTZ"}},function(t,e,n){t.exports={history:"History_history__whOqt",games:"History_games__2ojgh"}},,,,,function(t,e,n){t.exports={home:"Home_home__3Xdg2"}},function(t,e,n){t.exports={menu:"Menu_menu__2xbQm"}},function(t,e,n){t.exports={btn:"Button_btn__1Lkv5"}},,function(t,e,n){t.exports={back:"BackHome_back__1Ydoc"}},function(t,e,n){t.exports={settings:"Settings_settings__1sfsD"}},,,,,,function(t,e,n){},,,,,,,,,,function(t,e,n){"use strict";n.r(e);var c=n(2),s=n(3),a=n.n(s),i=n(36),r=n.n(i),o=(n(48),function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,59)).then((function(e){var n=e.getCLS,c=e.getFID,s=e.getFCP,a=e.getLCP,i=e.getTTFB;n(t),c(t),s(t),a(t),i(t)}))}),u=n(12),l=n(16),d=n(7),j=n(37),b=n(38),f=function(t){var e=t.options;return Object(c.jsx)("ul",{className:b.menu,children:e.map((function(t,e){return Object(c.jsx)("li",{children:t},e)}))})},h=n(39),O=function(t){var e=t.link,n=t.handleClick,s=void 0===n?function(){}:n,a=t.children,i=Object(c.jsx)("button",{onClick:s,className:h.btn,children:Object(c.jsx)("span",{children:a})});return e?Object(c.jsx)(l.b,{to:e,children:i}):i},m=[Object(c.jsx)(O,{link:"/game",children:"New game"}),Object(c.jsx)(O,{link:"/settings",children:"Settings"}),Object(c.jsx)(O,{link:"/history",children:"Past games"})],p=function(){return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("div",{className:j.home,children:[Object(c.jsx)("h1",{className:"headline",children:"Battleship"}),Object(c.jsx)(f,{options:m})]})})},x=Object(s.createContext)(),_=n(22),g=n(19),v=n.n(g),S=n(33),N=n(30),y=n(14),C=function(){var t=Object(N.a)(v.a.mark((function t(e,n){var c,s,a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=y.a.auth().currentUser){t.next=5;break}return t.next=4,E();case 4:return t.abrupt("return",C(e,n));case 5:return s=Object(S.a)(Object(S.a)({},e),{},{startAt:Date.now()}),t.next=8,y.a.database().ref("users/".concat(null===c||void 0===c?void 0:c.uid,"/boards")).push(s).key;case 8:a=t.sent,n(a);case 10:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),E=function(){var t=Object(N.a)(v.a.mark((function t(){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.a.auth().signInAnonymously();case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),k=Object.freeze({SEA:0,MISSED:1,SHOOT:2,SUNK:3}),A=function(t,e){return Math.floor(Math.random()*(e-t))+t},w=function(t){return JSON.parse(JSON.stringify(t))},T=Object.freeze({TOP:0,RIGHT:1,BOTTOM:2,LEFT:3}),G=function t(e,n){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=[T.TOP,T.RIGHT,T.BOTTOM,T.LEFT],a=A(0,e.length),i=A(0,e[0].length),r=s[A(0,s.length)],o=L(e,a,i,n.shipLongitude,r);return o&&D(o)?(B(o,e,n.id),e):t(e,n,++c)},L=function(t,e,n,c,s){switch(s){case T.BOTTOM:return e+c<t[0].length?function(s){for(var a=0;a<c;a++)s(e+a,n,t[e+a][n])}:null;case T.RIGHT:return n+c<t.length?function(s){for(var a=0;a<c;a++)s(e,n+a,t[e][n+a])}:null;case T.TOP:return e-c>=0?function(s){for(var a=0;a<c;a++)s(e-a,n,t[e-a][n])}:null;case T.LEFT:return n-c>=0?function(s){for(var a=0;a<c;a++)s(e,n-a,t[e][n-a])}:null;default:return null}},D=function(t){var e=!0;return t((function(t,n,c){c.id&&(e=!1)})),e},B=function(t,e,n){t((function(t,c,s){e[t][c]={id:n,status:k.SEA}}))},I=n(23),M=n(15),F=n.n(M),U=function(t){switch(t){case k.SEA:return F.a.initial;case k.MISSED:return F.a.missed;case k.SHOOT:return F.a.shoot;case k.SUNK:return F.a.sunk;default:return F.a.initial}},H=function(t){var e=t.status,n=t.onClick,s=t.column,a=t.row,i={gridColumn:"".concat(s,"/").concat(s+1),gridRow:"".concat(a,"/").concat(a+1)};return Object(c.jsx)("div",{onClick:n,style:i,className:"".concat(F.a.position," ").concat(U(e)),children:"\xa0"})},P=function(t){var e=t.board,n=t.shootToPosition;return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("div",{className:I.board,children:[e&&e.map((function(t,e){return t.map((function(t,s){return Object(c.jsx)(H,{onClick:function(){return n(e,s)},row:e+1,column:s+1,status:t.status},"".concat(e).concat(s))}))})),["a","b","c","d","e","f","g","h","i","j"].map((function(t,e){return Object(c.jsx)("div",{className:I.coord,style:{gridColumn:11/12,gridRow:"".concat(e+1,"/").concat(e+2)},children:t},"row".concat(e))})),[1,2,3,4,5,6,7,8,9,10,""].map((function(t,e){return Object(c.jsx)("div",{className:I.coord,style:{gridRow:11/12,gridColumn:"".concat(e+1,"/").concat(e+2)},children:t},"col".concat(e))}))]})})},R=n(41),Y=function(){return Object(c.jsx)(l.b,{to:"/",className:R.back,children:Object(c.jsx)("span",{children:"\u2190"})})},V=n(24),X=function(t){var e=t.header,n=t.text,s=t.restartGame;return Object(c.jsxs)("div",{className:V.endGame,children:[Object(c.jsx)("h1",{className:"headline",children:e}),Object(c.jsx)("p",{className:V.message,children:n}),Object(c.jsxs)("div",{className:V.actions,children:[Object(c.jsx)(O,{link:"/",children:"Back home"}),Object(c.jsx)(O,{link:"/game",handleClick:s,children:"Try again"})]})]})},z=[{id:"s1",shipLongitude:4},{id:"s2",shipLongitude:3},{id:"s3",shipLongitude:3},{id:"s4",shipLongitude:2},{id:"s5",shipLongitude:2},{id:"s6",shipLongitude:2},{id:"s7",shipLongitude:1},{id:"s8",shipLongitude:1},{id:"s9",shipLongitude:1},{id:"s10",shipLongitude:1}],J=function(t,e){var n=t?"Congratulations!":"Probably bad luck",s=t?"You defeated me! But I bet you that you will not do it again":"Don't feel bad. Not too many can beat me";return Object(c.jsx)(X,{header:n,text:s,restartGame:e})},K=function(){var t=Object(s.useContext)(x).difficulty,e=Object(s.useState)(),n=Object(u.a)(e,2),a=n[0],i=n[1],r=Object(s.useState)(),o=Object(u.a)(r,2),l=o[0],d=o[1],j=Object(s.useState)(1),b=Object(u.a)(j,2),f=b[0],h=b[1],O=Object(s.useState)(0),m=Object(u.a)(O,2),p=m[0],g=m[1],v=Object(s.useState)(!1),S=Object(u.a)(v,2),N=S[0],E=S[1],A=Object(s.useState)(!1),T=Object(u.a)(A,2),L=T[0],D=T[1];Object(s.useEffect)((function(){B()}),[]),Object(s.useEffect)((function(){!function(t,e){var n=y.a.auth().currentUser;n&&e&&y.a.database().ref("users/".concat(n.uid,"/boards/").concat(e,"/")).update(t)}(l,a)}),[l,a]),Object(s.useEffect)((function(){p===z.length&&M(!0)}),[p]);var B=function(){var t=function(t,e){var n=w(t);return e.forEach((function(t){G(n,t)})),n}(function(t,e){for(var n=[],c=0;c<t;c++)n[c]=Array(e).fill({status:k.SEA});return n}(10,10),z);d(t),C(t,i)},I=function(){return p===z.length},M=function(t){!function(t,e,n){var c=y.a.auth().currentUser;y.a.database().ref("users/".concat(c.uid,"/boards/").concat(t)).update({won:e,finishAt:Date.now(),turns:n})}(a,t,f),E(!0),D(t)},F=function(t,e){d((function(n){var c=w(n);return e.forEach((function(e){var n=e.posX,s=e.posY;c[n][s].status=t})),c}))},U=function(t,e,n){d((function(c){var s=w(c);return s[e][n].status=t,s}))};return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(Y,{}),!N&&Object(c.jsxs)("div",{className:_.game,children:[Object(c.jsxs)("h3",{className:_.titleClass,children:["Turn: ",Object(c.jsx)("span",{children:f})]}),Object(c.jsx)(P,{shootToPosition:function(e,n){if(l[e][n].status===k.SEA){if(function(t,e,n){return!!t[e][n].id}(l,e,n)){U(k.SHOOT,e,n);var c=function(t,e,n){var c=!0,s=[],a=t[e][n].id;return t.forEach((function(t,i){t.forEach((function(t,r){t.id===a&&(s.push({posX:i,posY:r}),i===e&&r===n||t.status!==k.SHOOT&&(c=!1))}))})),c?s:c}(l,e,n);c&&(F(k.SUNK,c),g((function(t){return t+1})))}else U(k.MISSED,e,n);I()&&M(!0),t===f&&M(!1),h((function(t){return t+1}))}console.log(l)},board:l})]}),N&&Object(c.jsx)("div",{className:_.finished,children:J(L,(function(){h(1),g(0),E(!1),D(!1),B()}))})]})},Q=Object.freeze({EASY:0,MEDIUM:100,HARD:50}),q=n(42),W=n(20),Z=function(t){var e=t.name,n=t.children,s=t.value,a=t.selected,i=t.handleSelect;return Object(c.jsxs)("div",{className:"".concat(W.inputContainer," ").concat(a?W.selected:""),children:[Object(c.jsx)("label",{className:W.inputLabel,htmlFor:s,children:n}),Object(c.jsx)("input",{onClick:i,className:W.input,type:"radio",name:e,id:s,value:s})]})},$=function(){var t=Object(s.useContext)(x),e=t.difficulty,n=t.setDifficulty,a=[Object(c.jsx)(Z,{name:"difficulty",handleSelect:function(){return n(Q.EASY)},selected:Q.EASY===e,value:Q.EASY,children:"Easy"}),Object(c.jsx)(Z,{name:"difficulty",handleSelect:function(){return n(Q.MEDIUM)},selected:Q.MEDIUM===e,value:Q.MEDIUM,children:"Medium"}),Object(c.jsx)(Z,{name:"difficulty",handleSelect:function(){console.log("AS"),n(Q.HARD)},selected:Q.HARD===e,value:Q.HARD,children:"Hard"})];return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(Y,{}),Object(c.jsxs)("div",{className:q.settings,children:[Object(c.jsx)("h1",{className:"headline",children:"How good you are?"}),Object(c.jsx)(f,{options:a})]})]})},tt=n(31),et=n.p+"static/media/Sail-Away.7edd268f.mp4",nt=function(){return Object(c.jsx)("div",{className:tt.bgVideo,children:Object(c.jsxs)("video",{className:tt.bgVideoContent,autoPlay:!0,muted:!0,loop:!0,children:[Object(c.jsx)("source",{src:et,type:"video/mp4"}),"Your browser is not supported!"]})})},ct=n(17),st=function(){var t=Object(s.useState)(),e=Object(u.a)(t,2),n=e[0],c=e[1];return Object(s.useEffect)((function(){var t,e=null===(t=ct.a.auth().currentUser)||void 0===t?void 0:t.uid;if(e){var n=ct.a.database().ref("users/".concat(e,"/boards/"));return n.on("value",(function(t){return c(t.val())})),function(){return n.off("value")}}}),[]),n},at=n(11),it=function(t){var e=new Date(t),n=e.toLocaleDateString("en-US"),c=e.toLocaleTimeString("en-US");return"".concat(n," - ").concat(c)},rt=function(t){return(20/t*100).toFixed(2)},ot=function(t){var e=t.startAt,n=t.finishAt,s=t.won,a=t.turns,i=t.numberGame;return Object(c.jsxs)("div",{className:at.card,children:[Object(c.jsxs)("p",{className:at.title,children:["Game ",i," - ",Object(c.jsx)("span",{className:s?at.success:at.failure,children:s?"WIN":"LOOSE"})]}),Object(c.jsxs)("div",{className:at.statisticContainer,children:[Object(c.jsxs)("div",{className:at.statisticSection,children:[Object(c.jsxs)("p",{className:at.statistic,children:["Started at: ",Object(c.jsx)("span",{children:it(e)})]}),Object(c.jsxs)("p",{className:at.statistic,children:["Finished at: ",Object(c.jsx)("span",{children:it(n)})]})]}),Object(c.jsxs)("div",{className:at.statisticSection,children:[Object(c.jsxs)("p",{className:at.statistic,children:["Turns: ",Object(c.jsx)("span",{children:a})]}),Object(c.jsxs)("p",{className:at.statistic,children:["Accuracy: ",Object(c.jsxs)("span",{children:[rt(a),"%"]})]})]})]})]})},ut=n(32),lt=function(){var t,e=st(),n=e?null===(t=Object.values(e))||void 0===t?void 0:t.filter((function(t){return t.finishAt})):[];return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(Y,{}),Object(c.jsxs)("div",{className:ut.history,children:[Object(c.jsx)("h1",{className:"headline",children:"Past games"}),Object(c.jsx)("div",{className:ut.games,children:n.map((function(t,e){return Object(c.jsx)(ot,{finishAt:t.finishAt,numberGame:e+1,startAt:t.startAt,turns:t.turns,won:t.won},e)}))})]})]})},dt=function(){var t=Object(s.useState)(Q.EASY),e=Object(u.a)(t,2),n=e[0],a=e[1];return Object(c.jsxs)(x.Provider,{value:{difficulty:n,setDifficulty:a},children:[Object(c.jsx)(nt,{}),Object(c.jsx)(l.a,{children:Object(c.jsxs)(d.c,{children:[Object(c.jsx)(d.a,{exact:!0,path:"/",children:Object(c.jsx)(p,{})}),Object(c.jsx)(d.a,{path:"/game",children:Object(c.jsx)(K,{})}),Object(c.jsx)(d.a,{path:"/settings",children:Object(c.jsx)($,{})}),Object(c.jsx)(d.a,{path:"/history",children:Object(c.jsx)(lt,{})})]})})]})};ct.a.initializeApp({apiKey:"AIzaSyBQZ50USvUY702JRNcm3el84dM6pnXLxwk",authDomain:"pappa-battleship.firebaseapp.com",databaseURL:"https://pappa-battleship.firebaseio.com",projectId:"pappa-battleship",storageBucket:"pappa-battleship.appspot.com",messagingSenderId:"794774112549",appId:"1:794774112549:web:4f3a4a3bbd7a88c592f2cc",measurementId:"G-1E7FSGF2E4"}),ct.a.analytics(),r.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(dt,{})}),document.getElementById("root")),o()}],[[58,1,2]]]);
//# sourceMappingURL=main.71e3926b.chunk.js.map