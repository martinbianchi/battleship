(this.webpackJsonpbattleship=this.webpackJsonpbattleship||[]).push([[0],[,,,,,,,,,,,function(t,e,n){t.exports={card:"CardGame_card__3hcCS",title:"CardGame_title__2_1TD",statisticContainer:"CardGame_statisticContainer__35rvz",statisticSection:"CardGame_statisticSection__2g7m9",statistic:"CardGame_statistic__24CA5",success:"CardGame_success__3dmJA",failure:"CardGame_failure__2gO8I"}},,,,function(t,e,n){t.exports={position:"Position_position__2XjEB",initial:"Position_initial__1Akpx",missed:"Position_missed__368Yt",shoot:"Position_shoot__3UnDM",sunk:"Position_sunk__X7Ufl"}},,,,,function(t,e,n){t.exports={input:"RadioButton_input__1jXbv",inputLabel:"RadioButton_inputLabel__37kxS",inputContainer:"RadioButton_inputContainer__3_Qdp",selected:"RadioButton_selected__2Bt5M"}},,function(t,e,n){t.exports={game:"Game_game__HeYIC",titleClass:"Game_titleClass__3qlDx",finished:"Game_finished__1nlYg"}},function(t,e,n){t.exports={board:"Board_board__kNpEF",coord:"Board_coord__3vbX8"}},function(t,e,n){t.exports={endGame:"EndGame_endGame__6K0ow",message:"EndGame_message__2WVYF",actions:"EndGame_actions__2cgxU"}},,,,,,,function(t,e,n){t.exports={bgVideo:"BgVideo_bgVideo__3RlYx",bgVideoContent:"BgVideo_bgVideoContent__2blTZ"}},function(t,e,n){t.exports={history:"History_history__whOqt",games:"History_games__2ojgh"}},,,,,function(t,e,n){t.exports={home:"Home_home__3Xdg2"}},function(t,e,n){t.exports={menu:"Menu_menu__2xbQm"}},function(t,e,n){t.exports={btn:"Button_btn__1Lkv5"}},,function(t,e,n){t.exports={back:"BackHome_back__1Ydoc"}},function(t,e,n){t.exports={settings:"Settings_settings__1sfsD"}},,,,,,function(t,e,n){},,,,,,,,,,function(t,e,n){"use strict";n.r(e);var c=n(2),a=n(3),s=n.n(a),i=n(36),r=n.n(i),o=(n(48),function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,59)).then((function(e){var n=e.getCLS,c=e.getFID,a=e.getFCP,s=e.getLCP,i=e.getTTFB;n(t),c(t),a(t),s(t),i(t)}))}),u=n(12),d=n(16),l=n(7),j=n(37),b=n(38),f=function(t){var e=t.options;return Object(c.jsx)("ul",{className:b.menu,children:e.map((function(t,e){return Object(c.jsx)("li",{children:t},e)}))})},h=n(39),m=function(t){var e=t.link,n=t.handleClick,a=void 0===n?function(){}:n,s=t.children,i=Object(c.jsx)("button",{onClick:a,className:h.btn,children:Object(c.jsx)("span",{children:s})});return e?Object(c.jsx)(d.b,{to:e,children:i}):i},O=[Object(c.jsx)(m,{link:"/game",children:"New game"}),Object(c.jsx)(m,{link:"/settings",children:"Settings"}),Object(c.jsx)(m,{link:"/history",children:"Past games"})],p=function(){return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("div",{className:j.home,children:[Object(c.jsx)("h1",{className:"headline",children:"Battleship"}),Object(c.jsx)(f,{options:O})]})})},x=Object(a.createContext)(),_=n(22),g=n(19),v=n.n(g),S=n(33),N=n(30),y=n(14),C=function(){var t=Object(N.a)(v.a.mark((function t(e,n){var c,a,s;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=y.a.auth().currentUser){t.next=5;break}return t.next=4,E();case 4:return t.abrupt("return",C(e,n));case 5:return a=Object(S.a)(Object(S.a)({},e),{},{startAt:Date.now()}),t.next=8,y.a.database().ref("users/".concat(null===c||void 0===c?void 0:c.uid,"/boards")).push(a).key;case 8:s=t.sent,n(s);case 10:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),E=function(){var t=Object(N.a)(v.a.mark((function t(){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.a.auth().signInAnonymously();case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),k=Object.freeze({SEA:0,MISSED:1,SHOOT:2,SUNK:3}),A=function(t,e){return Math.floor(Math.random()*(e-t))+t},w=function(t){return JSON.parse(JSON.stringify(t))},T=Object.freeze({TOP:0,RIGHT:1,BOTTOM:2,LEFT:3}),G=function t(e,n){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=[T.TOP,T.RIGHT,T.BOTTOM,T.LEFT],s=A(0,e.length),i=A(0,e[0].length),r=a[A(0,a.length)],o=L(e,s,i,n.shipLongitude,r);return o&&D(o)?B(o,e,n.id):t(e,n,++c)},L=function(t,e,n,c,a){switch(a){case T.BOTTOM:return e+c<t[0].length?function(a){for(var s=0;s<c;s++)a(e+s,n,t[e+s][n])}:null;case T.RIGHT:return n+c<t.length?function(a){for(var s=0;s<c;s++)a(e,n+s,t[e][n+s])}:null;case T.TOP:return e-c>=0?function(a){for(var s=0;s<c;s++)a(e-s,n,t[e-s][n])}:null;case T.LEFT:return n-c>=0?function(a){for(var s=0;s<c;s++)a(e,n-s,t[e][n-s])}:null;default:return null}},D=function(t){var e=!0;return t((function(t,n,c){c.id&&(e=!1)})),e},B=function(t,e,n){var c=w(e);return t((function(t,e,a){c[t][e]={id:n,status:k.SEA}})),c},I=n(23),M=n(15),F=n.n(M),U=function(t){switch(t){case k.SEA:return F.a.initial;case k.MISSED:return F.a.missed;case k.SHOOT:return F.a.shoot;case k.SUNK:return F.a.sunk;default:return F.a.initial}},H=function(t){var e=t.status,n=t.onClick,a=t.column,s=t.row,i={gridColumn:"".concat(a,"/").concat(a+1),gridRow:"".concat(s,"/").concat(s+1)};return Object(c.jsx)("div",{"data-testid":"position",onClick:n,style:i,className:"".concat(F.a.position," ").concat(U(e)),children:"\xa0"})},P=s.a.memo(H),R=function(t){var e=t.board,n=t.shootToPosition;return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("div",{className:I.board,children:[e&&e.map((function(t,e){return t.map((function(t,a){return Object(c.jsx)(P,{onClick:function(){return n(e,a)},row:e+1,column:a+1,status:t.status},"".concat(e).concat(a))}))})),["a","b","c","d","e","f","g","h","i","j"].map((function(t,e){return Object(c.jsx)("div",{className:I.coord,style:{gridColumn:11/12,gridRow:"".concat(e+1,"/").concat(e+2)},children:t},"row".concat(e))})),[1,2,3,4,5,6,7,8,9,10,""].map((function(t,e){return Object(c.jsx)("div",{className:I.coord,style:{gridRow:11/12,gridColumn:"".concat(e+1,"/").concat(e+2)},children:t},"col".concat(e))}))]})})},Y=n(41),V=function(){return Object(c.jsx)(d.b,{to:"/",className:Y.back,children:Object(c.jsx)("span",{children:"\u2190"})})},X=n(24),z=function(t){var e=t.header,n=t.text,a=t.restartGame;return Object(c.jsxs)("div",{className:X.endGame,children:[Object(c.jsx)("h1",{className:"headline",children:e}),Object(c.jsx)("p",{className:X.message,children:n}),Object(c.jsxs)("div",{className:X.actions,children:[Object(c.jsx)(m,{link:"/",children:"Back home"}),Object(c.jsx)(m,{link:"/game",handleClick:a,children:"Try again"})]})]})},J=[{id:"s1",shipLongitude:4},{id:"s2",shipLongitude:3},{id:"s3",shipLongitude:3},{id:"s4",shipLongitude:2},{id:"s5",shipLongitude:2},{id:"s6",shipLongitude:2},{id:"s7",shipLongitude:1},{id:"s8",shipLongitude:1},{id:"s9",shipLongitude:1},{id:"s10",shipLongitude:1}],K=function(t,e){var n=t?"Congratulations!":"Probably bad luck",a=t?"You defeated me! But I bet you that you will not do it again":"Don't feel bad. Not too many can beat me";return Object(c.jsx)(z,{header:n,text:a,restartGame:e})},Q=function(){var t=Object(a.useContext)(x).difficulty,e=Object(a.useState)(),n=Object(u.a)(e,2),s=n[0],i=n[1],r=Object(a.useState)(),o=Object(u.a)(r,2),d=o[0],l=o[1],j=Object(a.useState)(1),b=Object(u.a)(j,2),f=b[0],h=b[1],m=Object(a.useState)(0),O=Object(u.a)(m,2),p=O[0],g=O[1],v=Object(a.useState)(!1),S=Object(u.a)(v,2),N=S[0],E=S[1],A=Object(a.useState)(!1),T=Object(u.a)(A,2),L=T[0],D=T[1];Object(a.useEffect)((function(){B()}),[]),Object(a.useEffect)((function(){!function(t,e){var n=y.a.auth().currentUser;n&&e&&y.a.database().ref("users/".concat(n.uid,"/boards/").concat(e,"/")).update(t)}(d,s)}),[d,s]),Object(a.useEffect)((function(){p===J.length&&M(!0)}),[p]);var B=function(){var t=function(t,e){var n=w(t);return e.forEach((function(t){n=G(n,t)})),n}(function(t,e){for(var n=[],c=0;c<t;c++)n[c]=Array(e).fill({status:k.SEA});return n}(10,10),J);l(t),C(t,i)},I=function(){return p===J.length},M=function(t){!function(t,e,n){var c=y.a.auth().currentUser;y.a.database().ref("users/".concat(c.uid,"/boards/").concat(t)).update({won:e,finishAt:Date.now(),turns:n})}(s,t,f),E(!0),D(t)},F=function(t,e){l((function(n){var c=w(n);return e.forEach((function(e){var n=e.posX,a=e.posY;c[n][a].status=t})),c}))},U=function(t,e,n){l((function(c){var a=w(c);return a[e][n].status=t,a}))};return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(V,{}),!N&&Object(c.jsxs)("div",{className:_.game,children:[Object(c.jsxs)("h3",{className:_.titleClass,children:["Turn: ",Object(c.jsx)("span",{children:f})]}),Object(c.jsx)(R,{shootToPosition:function(e,n){if(d[e][n].status===k.SEA){if(function(t,e,n){return!!t[e][n].id}(d,e,n)){U(k.SHOOT,e,n);var c=function(t,e,n){var c=!0,a=[],s=t[e][n].id;return t.forEach((function(t,i){t.forEach((function(t,r){t.id===s&&(a.push({posX:i,posY:r}),i===e&&r===n||t.status!==k.SHOOT&&(c=!1))}))})),c?a:c}(d,e,n);c&&(F(k.SUNK,c),g((function(t){return t+1})))}else U(k.MISSED,e,n);I()&&M(!0),t===f&&M(!1),h((function(t){return t+1}))}},board:d})]}),N&&Object(c.jsx)("div",{className:_.finished,children:K(L,(function(){h(1),g(0),E(!1),D(!1),B()}))})]})},q=Object.freeze({EASY:0,MEDIUM:100,HARD:50}),W=n(42),Z=n(20),$=function(t){var e=t.name,n=t.children,a=t.value,s=t.selected,i=t.handleSelect;return Object(c.jsxs)("div",{className:"".concat(Z.inputContainer," ").concat(s?Z.selected:""),children:[Object(c.jsx)("label",{className:Z.inputLabel,htmlFor:a,children:n}),Object(c.jsx)("input",{onClick:i,className:Z.input,type:"radio",name:e,id:a,value:a})]})},tt=function(){var t=Object(a.useContext)(x),e=t.difficulty,n=t.setDifficulty,s=[Object(c.jsx)($,{name:"difficulty",handleSelect:function(){return n(q.EASY)},selected:q.EASY===e,value:q.EASY,children:"Easy"}),Object(c.jsx)($,{name:"difficulty",handleSelect:function(){return n(q.MEDIUM)},selected:q.MEDIUM===e,value:q.MEDIUM,children:"Medium"}),Object(c.jsx)($,{name:"difficulty",handleSelect:function(){console.log("AS"),n(q.HARD)},selected:q.HARD===e,value:q.HARD,children:"Hard"})];return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(V,{}),Object(c.jsxs)("div",{className:W.settings,children:[Object(c.jsx)("h1",{className:"headline",children:"How good you are?"}),Object(c.jsx)(f,{options:s})]})]})},et=n(31),nt=n.p+"static/media/Sail-Away.7edd268f.mp4",ct=function(){return Object(c.jsx)("div",{className:et.bgVideo,children:Object(c.jsxs)("video",{className:et.bgVideoContent,autoPlay:!0,muted:!0,loop:!0,children:[Object(c.jsx)("source",{src:nt,type:"video/mp4"}),"Your browser is not supported!"]})})},at=n(17),st=function(){var t=Object(a.useState)(),e=Object(u.a)(t,2),n=e[0],c=e[1];return Object(a.useEffect)((function(){var t,e=null===(t=at.a.auth().currentUser)||void 0===t?void 0:t.uid;if(e){var n=at.a.database().ref("users/".concat(e,"/boards/"));return n.on("value",(function(t){return c(t.val())})),function(){return n.off("value")}}}),[]),n},it=n(11),rt=function(t){var e=new Date(t),n=e.toLocaleDateString("en-US"),c=e.toLocaleTimeString("en-US");return"".concat(n," - ").concat(c)},ot=function(t){return(20/t*100).toFixed(2)},ut=function(t){var e=t.startAt,n=t.finishAt,a=t.won,s=t.turns,i=t.numberGame;return Object(c.jsxs)("div",{className:it.card,children:[Object(c.jsxs)("p",{className:it.title,children:["Game ",i," - ",Object(c.jsx)("span",{className:a?it.success:it.failure,children:a?"WIN":"LOOSE"})]}),Object(c.jsxs)("div",{className:it.statisticContainer,children:[Object(c.jsxs)("div",{className:it.statisticSection,children:[Object(c.jsxs)("p",{className:it.statistic,children:["Started at: ",Object(c.jsx)("span",{children:rt(e)})]}),Object(c.jsxs)("p",{className:it.statistic,children:["Finished at: ",Object(c.jsx)("span",{children:rt(n)})]})]}),Object(c.jsxs)("div",{className:it.statisticSection,children:[Object(c.jsxs)("p",{className:it.statistic,children:["Turns: ",Object(c.jsx)("span",{children:s})]}),Object(c.jsxs)("p",{className:it.statistic,children:["Accuracy: ",Object(c.jsxs)("span",{children:[ot(s),"%"]})]})]})]})]})},dt=s.a.memo(ut),lt=n(32),jt=function(){var t,e=st(),n=e?null===(t=Object.values(e))||void 0===t?void 0:t.filter((function(t){return t.finishAt})):[];return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(V,{}),Object(c.jsxs)("div",{className:lt.history,children:[Object(c.jsx)("h1",{className:"headline",children:"Past games"}),Object(c.jsx)("div",{className:lt.games,children:n.map((function(t,e){return Object(c.jsx)(dt,{finishAt:t.finishAt,numberGame:e+1,startAt:t.startAt,turns:t.turns,won:t.won},e)}))})]})]})},bt=function(){var t=Object(a.useState)(q.EASY),e=Object(u.a)(t,2),n=e[0],s=e[1];return Object(c.jsxs)(x.Provider,{value:{difficulty:n,setDifficulty:s},children:[Object(c.jsx)(ct,{}),Object(c.jsx)(d.a,{children:Object(c.jsxs)(l.c,{children:[Object(c.jsx)(l.a,{path:"/game",children:Object(c.jsx)(Q,{})}),Object(c.jsx)(l.a,{path:"/settings",children:Object(c.jsx)(tt,{})}),Object(c.jsx)(l.a,{path:"/history",children:Object(c.jsx)(jt,{})}),Object(c.jsx)(l.a,{path:"/",children:Object(c.jsx)(p,{})})]})})]})};at.a.initializeApp({apiKey:"AIzaSyBQZ50USvUY702JRNcm3el84dM6pnXLxwk",authDomain:"pappa-battleship.firebaseapp.com",databaseURL:"https://pappa-battleship.firebaseio.com",projectId:"pappa-battleship",storageBucket:"pappa-battleship.appspot.com",messagingSenderId:"794774112549",appId:"1:794774112549:web:4f3a4a3bbd7a88c592f2cc",measurementId:"G-1E7FSGF2E4"}),at.a.analytics(),r.a.render(Object(c.jsx)(s.a.StrictMode,{children:Object(c.jsx)(bt,{})}),document.getElementById("root")),o()}],[[58,1,2]]]);
//# sourceMappingURL=main.c94960ec.chunk.js.map